%% === TAB 5 ‚Äì Guida (FAQ) ===
    tabHelp = uitab(tg, 'Title', '‚ùì Guida');

    % === Titolo interno al pannello scrollabile ===
    uilabel(tabHelp, ...
        'Text', 'Domande frequenti (FAQ)', ...
        'Position', [20 510 800 30], ...
        'FontSize', 18, ...
        'FontWeight', 'bold', ...
        'FontName', 'Segoe UI');    
    
    % ScrollPanel visibile
    scrollPanel = uipanel(tabHelp, ...
        'Position', [20 20 1140 480], ...
        'Scrollable', 'on', ...
        'BackgroundColor', [1 1 1], ...
        'Tag', 'FAQScrollPanel');
    
    % === Pannello interno scrollabile (contiene tutto: titolo, domande e risposte) ===
    internalHeight = 2500;
    internalPanel = uipanel(scrollPanel, ...
        'Position', [0 0 1080 internalHeight], ...
        'BackgroundColor', [1 1 1], ...
        'BorderType', 'none');    
    
    % === Domande & Risposte ===
    domande = {
        'Come carico un‚Äôimmagine da classificare?', ...
        'Come funziona la classificazione?', ...
        'Posso classificare pi√π immagini insieme?', ...
        'A cosa serve la tab ‚ÄúVettori di feature‚Äù?', ...
        'Cosa viene salvato in una sessione?', ...
        'Come salvo una sessione?', ...
        'Come carico una sessione salvata?', ...
        'A cosa serve il CSV?', ...
        'Posso modificare i tag o i nomi dei file?', ...
        'Il classificatore pu√≤ sbagliare?', ...
        'Posso usare file .mat personalizzati?', ...
        'A cosa serve il log dettagliato?', ...
        'Posso eliminare i dati e ricominciare da zero?', ...
        'Perch√© un‚Äôimmagine non viene classificata?'
    };
    
    risposte = {
        "Per caricare un'immagine da classificare, vai alla tab 'Classifica immagine' e premi il pulsante 'üìÇ Carica immagine'. Si aprir√† una finestra in cui potrai selezionare file .jpg, .png o simili. L'immagine verr√† visualizzata in anteprima e sar√† pronta per la classificazione.",...
        "Il classificatore estrae caratteristiche geometriche (feature) dall'immagine, come forma e compattezza. Queste vengono analizzate secondo delle regole interne, e il sistema assegna la classe pi√π probabile (es. mano aperta, pugno, ecc.).",...
        "S√¨, puoi classificare pi√π immagini contemporaneamente. Caricale con 'üìÇ Carica immagine', poi premi 'üìÅ Classifica tutto'. Tutte le immagini verranno analizzate e i risultati salvati in un file CSV.",...
        "La tab 'Vettori di feature' ti permette di inserire direttamente i dati (feature) invece di caricare un'immagine. √à utile se hai gi√† calcolato le feature o hai un file .mat con i dati.",...
        "Vengono salvati tutti i dati della sessione attuale: immagini caricate, classificazioni, risultati CSV, log delle operazioni e vettori di feature. Quando riapri la sessione, tutto verr√† ripristinato.",...
        "Per salvare una sessione vai alla tab 'Sessione' e clicca su 'üíæ Salva sessione'. Scegli un nome file e una cartella. Tutti i dati verranno archiviati in un file .mat.",...
        "Vai alla tab 'Sessione' e clicca su 'üìÅ Carica sessione'. Seleziona il file .mat salvato in precedenza. Tutti i dati verranno caricati automaticamente.",...
        "Il CSV (Comma Separated Values) √® un file di testo che contiene una tabella. Ogni riga rappresenta un'immagine classificata, con il suo nome, le feature estratte e il risultato.",...
        "No, non dall'interno dell'app. Se vuoi modificare il nome o i tag dei file, fallo nel sistema operativo (Esplora file) e poi ricarica le immagini.",...
        "S√¨, il classificatore pu√≤ sbagliare, specialmente con immagini sfocate, gesti incompleti o condizioni di luce difficili. Usa immagini chiare con sfondi semplici per ottenere risultati migliori.",...
        "S√¨, se il file .mat contiene un vettore di feature nel formato corretto. Questo √® utile per testare dati generati da altri strumenti o manualmente.",...
        "Il log mostra tutte le operazioni eseguite nella sessione, come caricamenti, classificazioni, salvataggi ed errori. Serve a capire cosa √® successo e a ricostruire il flusso di lavoro.",...
        "S√¨. Nella tab 'Sessione' clicca su 'üßπ Pulisci cronologia'. Tutti i file caricati, le classificazioni e il log verranno cancellati. Potrai iniziare una nuova sessione da zero.",...
        "Ci sono diverse cause: il file potrebbe non essere un'immagine valida, avere un formato non supportato (.tiff, .bmp, ecc.), oppure essere troppo danneggiato o vuoto. Controlla che l'immagine sia nitida e ben ritagliata."
    };
    
    % === Variabili layout ===
    startY = internalHeight - 40;
    gap = 10;
    faqComponents = gobjects(length(domande), 2);
    responseHeight = 70;
    buttonHeight = 30;
    
    % === Genera dinamicamente domande/risposte ===
    for i = 1:length(domande)
        y = startY - (i - 1) * (buttonHeight + responseHeight + gap);
        
        % Bottone domanda
        btn = uibutton(internalPanel, ...
            'Text', ['‚ûï ' domande{i}], ...
            'FontSize', 14, ...
            'FontName', 'Segoe UI', ...
            'Position', [10 y 1060 buttonHeight], ...
            'HorizontalAlignment', 'left', ...
            'BackgroundColor', [1 1 1]);
    
        % Box risposta (nascosto inizialmente)
        answer = uitextarea(internalPanel, ...
            'Value', risposte(i), ...
            'Editable', 'off', ...
            'Visible', 'off', ...
            'FontSize', 13, ...
            'FontName', 'Segoe UI', ...
            'Position', [20 y - responseHeight - 5 1060 responseHeight]);
    
        % Collega al toggle
        btn.ButtonPushedFcn = @(src, ~) toggleFAQEntry(src, answer, scrollPanel);
    
        faqComponents(i, :) = [btn, answer];
    end

    % Scroll forzato in alto appena caricato
    drawnow;  % forza rendering
    scroll(scrollPanel, 'top');